# signate-submitter  
### Generate Signate-ready submissions from a single JSON config

`signate-submitter` is an agent-style pipeline that turns **Signate competition datasets into ready-to-upload `submission.csv` files**.  
It extends the original Autokaggler (Kaggle Titanic automation) into a competition-agnostic workflow that still favours simplicity, reproducibility, and low setup overhead.

---

## What it does

* Loads train/test data from a specified directory (or falls back to the bundled Titanic sample)
* Infers **classification vs regression** (or accepts an explicit setting)
* Builds a minimal-yet-solid preprocessing & modelling stack
  * Numeric: median imputation + standard scaling
  * Categorical: mode imputation + one-hot encoding
  * Models (profiles):  
    * `fast`: Logistic Regression (classification) / Ridge (regression)  
    * `power`: RandomForest  
    * `boosting`: HistGradientBoosting
* Runs 5-fold CV and logs the score
* Writes `submission.csv` with the specified ID + target columns
* Emits structured JSON output that always carries the `#KGNINJA` tag

---

## Repository layout

```
src/signate_submitter/    Core agent & pipeline
data/sample/              Bundled Titanic-like sample (train/test/schema)
tests/                    Pytest-based regression checks
.agent_tmp/, .agent_logs/ Runtime cache and logs (auto-created)
```

---

## Quickstart

### 1. Install

```bash
pip install -e ".[test]"
```

### 2. Prepare input

Provide a JSON config on stdin. Example for a local Signate dataset:

```bash
echo '{
  "data_source": "local",
  "dataset_dir": "/path/to/signate/dataset",
  "target_column": "y",
  "id_column": "id",
  "profile": "power",
  "problem_type": "auto",
  "submission_name": "submission.csv"
}' | python -m signate_submitter
```

If `dataset_dir` is omitted (or loading fails under `data_source="auto"`), the bundled Titanic sample is used.

### 3. Outputs

* `.agent_tmp/signate/submissions/<submission-name>.csv`
* `.agent_logs/run-<timestamp>.log`
* JSON to stdout:
  ```json
  {
    "ok": true,
    "meta": {
      "profile": "power",
      "problem_type": "classification",
      "tags": ["#KGNINJA"],
      ...
    },
    "result": {
      "cv_mean": 0.78,
      "submission_path": ".agent_tmp/signate/submissions/submission.csv"
    }
  }
  ```

---

## Configuration reference (`TaskInput`)

| Field | Default | Description |
|-------|---------|-------------|
| `profile` | `"fast"` | `fast` / `power` / `boosting` |
| `data_source` | `"auto"` | `auto` (localâ†’sample), `local`, `sample` |
| `dataset_dir` | `null` | Directory containing `train.csv` / `test.csv` |
| `train_filename` | `"train.csv"` | Custom train filename |
| `test_filename` | `"test.csv"` | Custom test filename |
| `target_column` | `"Survived"` | Target column in `train.csv` |
| `id_column` | `"PassengerId"` | Row identifier column |
| `submission_target` | `target_column` | Column name for predictions |
| `drop_columns` | `[]` | Columns to exclude from modelling |
| `problem_type` | `"auto"` | `classification` / `regression` / `auto` |
| `random_seed` | `42` | Seed for model + CV |
| `submission_name` | autogenerated | Output filename |
| `notes` | `null` | Free-form text appended to logs/metadata |

---

## Development

```bash
pytest
```

The agent auto-creates `.agent_tmp/` and `.agent_logs/` during runs. Clean them up freely between executions.

---

## License

MIT License
